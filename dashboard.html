<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Schedule System</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-spinner"></div>
    </div>

    <div class="page active auth-page" id="authPage">
      <div class="header">
        <div class="logo">
          <img src="/image/logo.png" alt="Logo" />
        </div>
        <h1>Benchamarachuthit Schedule For Student</h1>
      </div>

      <div class="main-content">
        <div class="container">
          <div class="alert alert-success" id="successAlert"></div>
          <div class="alert alert-error" id="errorAlert"></div>

          <div class="form-toggle">
            <button class="toggle-btn active" onclick="showLogin()">
              Login
            </button>
            <button class="toggle-btn" onclick="showRegister()">
              Register
            </button>
            <div class="toggle-slider" id="toggleSlider"></div>
          </div>

          <div class="form-section active" id="loginForm">
            <h2 class="form-title">Login</h2>
            <form id="loginFormElement">
              <div class="form-group">
                <i class="bi bi-envelope input-icon"></i>
                <input type="email" id="loginEmail" placeholder=" " required />
                <label>Email</label>
                <div class="error-message" id="loginEmailError"></div>
              </div>
              <div class="form-group">
                <i class="bi bi-lock input-icon"></i>
                <input
                  type="password"
                  id="loginPassword"
                  placeholder=" "
                  required
                />
                <label>Password</label>
                <button
                  type="button"
                  class="show-password"
                  onclick="togglePassword('loginPassword')"
                >
                  <i class="bi bi-eye"></i>
                </button>
                <div class="error-message" id="loginPasswordError"></div>
              </div>
              <button type="submit" class="submit-btn" id="loginBtn">
                Sign in
              </button>
              <div class="forgot-password">
                <a href="#" onclick="forgotPassword()">Forgot your password?</a>
              </div>
            </form>
          </div>

          <div class="form-section" id="registerForm">
            <h2 class="form-title">Register</h2>
            <form id="registerFormElement">
              <div class="form-group">
                <i class="bi bi-card-text input-icon"></i>
                <input
                  type="text"
                  id="studentId"
                  placeholder=" "
                  required
                  maxlength="5"
                />
                <label>รหัสนักเรียน (ขึ้นต้นด้วย 4)</label>
                <div class="error-message" id="studentIdError"></div>
              </div>
              <div class="form-group">
                <i class="bi bi-mortarboard input-icon"></i>
                <select id="gradeLevel" required>
                  <option value="" disabled selected hidden></option>
                  <option value="ม.1">ม.1</option>
                  <option value="ม.2">ม.2</option>
                  <option value="ม.3">ม.3</option>
                  <option value="ม.4">ม.4</option>
                  <option value="ม.5">ม.5</option>
                  <option value="ม.6">ม.6</option>
                </select>
                <label>ชั้น</label>
                <div class="error-message" id="gradeLevelError"></div>
              </div>
              <div class="form-group">
                <i class="bi bi-door-open input-icon"></i>
                <select id="classroom" required disabled>
                  <option value="" disabled selected hidden></option>
                </select>
                <label>ห้อง</label>
                <div class="error-message" id="classroomError"></div>
              </div>
              <div class="form-group">
                <i class="bi bi-envelope input-icon"></i>
                <input
                  type="email"
                  id="registerEmail"
                  placeholder=" "
                  required
                />
                <label>Email Address</label>
                <div class="error-message" id="registerEmailError"></div>
              </div>
              <div class="form-group">
                <i class="bi bi-lock input-icon"></i>
                <input
                  type="password"
                  id="registerPassword"
                  placeholder=" "
                  required
                />
                <label>Password</label>
                <button
                  type="button"
                  class="show-password"
                  onclick="togglePassword('registerPassword')"
                >
                  <i class="bi bi-eye"></i>
                </button>
                <div class="error-message" id="registerPasswordError"></div>
              </div>
              <div class="form-group">
                <i class="bi bi-shield-check input-icon"></i>
                <input
                  type="password"
                  id="confirmPassword"
                  placeholder=" "
                  required
                />
                <label>Confirm Password</label>
                <button
                  type="button"
                  class="show-password"
                  onclick="togglePassword('confirmPassword')"
                >
                  <i class="bi bi-eye"></i>
                </button>
                <div class="error-message" id="confirmPasswordError"></div>
              </div>
              <button type="submit" class="submit-btn" id="registerBtn">
                Create Account
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="page dashboard-page" id="dashboardPage">
      <div class="dashboard-header">
        <div class="dashboard-header-left">
          <div class="logo">
            <img src="/image/logo.png" alt="Logo" />
          </div>
          <h1>Student Dashboard</h1>
        </div>
        <div class="dashboard-header-right">
          <div class="user-info">
            <div class="user-avatar">
              <i class="bi bi-person-fill"></i>
            </div>
            <div class="user-details">
              <div class="user-name" id="userName">Loading...</div>
              <div class="user-class" id="userClass">Loading...</div>
            </div>
          </div>
          <button class="logout-btn" onclick="logout()">
            <i class="bi bi-box-arrow-right"></i>
            <span>Logout</span>
          </button>
        </div>
      </div>

      <div class="dashboard-container">
        <div class="demo-message">
          <i class="bi bi-info-circle"></i>
          <strong>Real Schedule:</strong> This shows the actual timetable for
          ม.6/5 from Benchamarachuthit School, including teacher names and room
          numbers.
        </div>

        <div class="welcome-section">
          <h1 class="welcome-title" id="welcomeTitle">Welcome back!</h1>
          <p class="welcome-subtitle">
            Here's your student information and dashboard.
          </p>

          <div class="student-info-grid">
            <div class="info-card">
              <div class="info-label">Student ID</div>
              <div class="info-value" id="studentIdValue">Loading...</div>
            </div>
            <div class="info-card">
              <div class="info-label">Grade Level</div>
              <div class="info-value" id="gradeLevelValue">Loading...</div>
            </div>
            <div class="info-card">
              <div class="info-label">Classroom</div>
              <div class="info-value" id="classroomValue">Loading...</div>
            </div>
            <div class="info-card">
              <div class="info-label">Email</div>
              <div class="info-value" id="emailValue">Loading...</div>
            </div>
          </div>
        </div>

        <div class="dashboard-grid">
          <div class="card">
            <div class="card-header">
              <div class="card-icon">
                <i class="bi bi-clock-history"></i>
              </div>
              <h2 class="card-title">ตารางเรียนวันนี้</h2>
            </div>
            <div id="todayScheduleContent">
              <div class="loading-content">
                <i class="bi bi-arrow-clockwise"></i>
                กำลังโหลดตารางเรียน...
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-icon">
                <i class="bi bi-play-circle"></i>
              </div>
              <h2 class="card-title">คาบเรียนปัจจุบัน</h2>
            </div>
            <div id="currentClassInfo">
              <div class="loading-content">
                <i class="bi bi-arrow-clockwise"></i>
                กำลังตรวจสอบเวลา...
              </div>
            </div>
          </div>
        </div>

        <div class="card schedule-container">
          <div class="card-header">
            <div class="card-icon">
              <i class="bi bi-calendar-week"></i>
            </div>
            <h2 class="card-title">ตารางเรียนประจำสัปดาห์</h2>
          </div>
          <div id="scheduleContent">
            <div class="loading-content">
              <i class="bi bi-arrow-clockwise"></i>
              กำลังโหลดตารางเรียน...
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="bi bi-lightning-charge"></i>
            </div>
            <h2 class="card-title">Quick Actions</h2>
          </div>
          <div class="quick-actions">
            <div class="action-btn" onclick="showFeature('Schedule')">
              <div class="action-icon">
                <i class="bi bi-calendar-event"></i>
              </div>
              <div class="action-text">View Schedule</div>
              <div class="action-desc">See your full timetable</div>
            </div>
            <div class="action-btn" onclick="showFeature('Grades')">
              <div class="action-icon"><i class="bi bi-award"></i></div>
              <div class="action-text">Check Grades</div>
              <div class="action-desc">View academic progress</div>
            </div>
            <div class="action-btn" onclick="showFeature('Announcements')">
              <div class="action-icon"><i class="bi bi-megaphone"></i></div>
              <div class="action-text">Announcements</div>
              <div class="action-desc">Latest school news</div>
            </div>
            <div class="action-btn" onclick="showFeature('Profile')">
              <div class="action-icon"><i class="bi bi-person-gear"></i></div>
              <div class="action-text">Edit Profile</div>
              <div class="action-desc">Update your information</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="firebase-config.js"></script>
    <script src="script.js"></script>
  </body>
</html>
